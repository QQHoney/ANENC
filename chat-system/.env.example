# 聊天系统环境变量配置示例
# 复制此文件为 .env 并填入实际配置

# ========== 服务器配置 ==========
# 应用运行端口（Serv00建议使用高位端口，如3000-8000）
PORT=3000

# 运行环境
NODE_ENV=production

# ========== 数据库配置 ==========
# Serv00 MySQL主机（通常为localhost）
DB_HOST=localhost

# 数据库用户名（从Serv00控制面板获取）
DB_USER=your_serv00_username

# 数据库密码
DB_PASSWORD=your_mysql_password

# 数据库名称
DB_NAME=chat_system

# 数据库连接端口（通常为3306）
DB_PORT=3306

# ========== JWT认证配置 ==========
# JWT密钥（必须复杂，建议32位以上随机字符串）
JWT_SECRET=your_super_secret_jwt_key_change_this_in_production_1234567890

# JWT过期时间
JWT_EXPIRE=24h

# ========== 应用限制配置 ==========
# 最大并发Socket连接数（Serv00限制，建议30-50）
MAX_CONNECTIONS=50

# 每分钟最大消息数（防刷）
MAX_MESSAGES_PER_MINUTE=30

# 文件上传大小限制（字节，5MB）
UPLOAD_LIMIT=5242880

# ========== 性能优化配置 ==========
# 消息缓存数量
MESSAGE_CACHE_SIZE=100

# 心跳间隔（毫秒）
HEARTBEAT_INTERVAL=30000

# 连接超时时间（毫秒）
CONNECTION_TIMEOUT=60000

# ========== 日志配置 ==========
# 日志级别: error, warn, info, debug
LOG_LEVEL=info

# 是否启用详细日志
LOG_VERBOSE=false

# ========== 文件上传配置 ==========
# 上传目录（相对路径）
UPLOAD_DIR=public/uploads

# 允许的文件类型
ALLOWED_TYPES=image/jpeg,image/png,image/gif,image/webp

# ========== 邮件配置（可选，用于验证） ==========
# 如果需要邮箱验证，配置SMTP
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASS=your_app_password
SMTP_FROM=noreply@yourdomain.com

# ========== 监控配置 ==========
# 监控检查间隔（毫秒）
MONITOR_INTERVAL=300000

# 内存警告阈值（MB）
MEMORY_WARNING=400

# CPU警告阈值（百分比）
CPU_WARNING=80

# ========== 备份配置 ==========
# 备份保留天数
BACKUP_RETENTION_DAYS=7

# 备份时间（24小时制）
BACKUP_TIME=02:00

# ========== 安全配置 ==========
# CORS允许的源（生产环境建议指定具体域名）
CORS_ORIGIN=*

# 速率限制窗口（分钟）
RATE_LIMIT_WINDOW=1

# 速率限制最大请求数
RATE_LIMIT_MAX=100

# ========== 开发调试配置 ==========
# 是否启用调试模式
DEBUG=false

# 是否启用详细SQL日志
SQL_LOG=false

# ========== Serv00特定配置 ==========
# Serv00域名（如果配置了自定义域名）
DOMAIN=yourdomain.com

# Serv00应用路径
APP_PATH=/home/your_username/domains/yourdomain.com/app

# Serv00日志路径
LOG_PATH=/home/your_username/domains/yourdomain.com/logs

# ========== 生产环境覆盖 ==========
# 生产环境特殊配置（可选）
# PROD_DB_HOST=prod-db-host
# PROD_JWT_SECRET=prod-secret-key

# ========== 测试环境配置 ==========
# 测试数据库（可选）
TEST_DB_HOST=localhost
TEST_DB_USER=test_user
TEST_DB_PASSWORD=test_password
TEST_DB_NAME=chat_system_test

# ========== 开发者配置 ==========
# 开发团队邮箱（用于告警通知）
ADMIN_EMAIL=admin@yourdomain.com

# 紧急联系人
EMERGENCY_CONTACT=+86-1234567890

# ========== 第三方服务（可选） ==========
# 如果使用外部CDN或消息服务
CDN_URL=
PUSHER_KEY=
PUSHER_SECRET=

# ========== 性能调优 ==========
# 数据库连接池最小连接数
DB_POOL_MIN=2

# 数据库连接池最大连接数（Serv00限制，建议5）
DB_POOL_MAX=5

# 数据库连接超时（毫秒）
DB_CONNECTION_TIMEOUT=10000

# ========== 缓存配置 ==========
# 是否启用Redis（Serv00可能不支持，保持false）
ENABLE_REDIS=false

# Redis配置（如果支持）
REDIS_HOST=localhost
REDIS_PORT=6379

# ========== 安全增强 ==========
# 密码最小长度
PASSWORD_MIN_LENGTH=6

# 密码要求特殊字符
PASSWORD_REQUIRE_SPECIAL=false

# 会话超时时间（分钟）
SESSION_TIMEOUT=1440

# ========== API配置 ==========
# API版本
API_VERSION=v1

# API前缀
API_PREFIX=/api

# 是否启用API文档
ENABLE_API_DOCS=true

# ========== 文件配置说明 ==========
# 重要提示：
# 1. 本文件为示例配置，不要提交到版本控制
# 2. 实际使用时复制为 .env 文件
# 3. 所有密码和密钥必须修改为复杂值
# 4. Serv00环境变量可能有限制，如遇问题请检查
# 5. 生产环境务必使用HTTPS

# ========== 配置验证 ==========
# 启动时验证配置
VALIDATE_CONFIG=true

# 严格模式（配置错误时退出）
STRICT_MODE=true