# Serv00å®æ—¶èŠå¤©ç³»ç»Ÿ

ä¸€ä¸ªä¸“ä¸ºServ00å…è´¹ä¸»æœºç¯å¢ƒä¼˜åŒ–çš„å®æ—¶èŠå¤©ç³»ç»Ÿï¼Œæ”¯æŒçœŸå®ç”¨æˆ·æ³¨å†Œã€å¥½å‹ç³»ç»Ÿã€å®æ—¶æ¶ˆæ¯ä¼ é€’å’Œå®Œæ•´çš„ç”¨æˆ·ç®¡ç†åŠŸèƒ½ã€‚

## ğŸ¯ é¡¹ç›®ç‰¹è‰²

- âœ… **Serv00ä¼˜åŒ–**: é’ˆå¯¹å…è´¹ä¸»æœºèµ„æºé™åˆ¶æ·±åº¦ä¼˜åŒ–
- âœ… **å®æ—¶é€šä¿¡**: åŸºäºSocket.ioçš„ä½å»¶è¿Ÿæ¶ˆæ¯ä¼ é€’
- âœ… **å®Œæ•´ç”¨æˆ·ç³»ç»Ÿ**: æ³¨å†Œã€ç™»å½•ã€å¥½å‹ã€é€šçŸ¥
- âœ… **å®‰å…¨å¯é **: JWTè®¤è¯ + è¾“å…¥éªŒè¯ + SQLé˜²æŠ¤
- âœ… **ç›‘æ§å®Œå–„**: è¿›ç¨‹å®ˆæŠ¤ + æ—¥å¿—è®°å½• + è‡ªåŠ¨å¤‡ä»½
- âœ… **æˆæœ¬å‹å¥½**: å®Œå…¨å…è´¹ï¼Œæ— éœ€é¢å¤–æœåŠ¡

## ğŸ“‹ æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæŠ€æœ¯
- **åç«¯**: Node.js + Express.js
- **å®æ—¶é€šä¿¡**: Socket.io
- **æ•°æ®åº“**: MySQL
- **è®¤è¯**: JWT + bcryptjs
- **è¿›ç¨‹ç®¡ç†**: PM2

### å‰ç«¯æŠ€æœ¯
- **æ¡†æ¶**: åŸç”ŸHTML/CSS/JSï¼ˆè½»é‡çº§ï¼‰
- **é€šä¿¡**: Socket.ioå®¢æˆ·ç«¯
- **æ ·å¼**: å“åº”å¼è®¾è®¡

## ğŸ“ é¡¹ç›®ç»“æ„

```
chat-system/
â”œâ”€â”€ server.js                 # ä¸»æœåŠ¡å™¨æ–‡ä»¶
â”œâ”€â”€ ecosystem.config.js       # PM2é…ç½®
â”œâ”€â”€ package.json              # ä¾èµ–é…ç½®
â”œâ”€â”€ .env                      # ç¯å¢ƒå˜é‡
â”œâ”€â”€ database-schema.sql       # æ•°æ®åº“æ¶æ„
â”œâ”€â”€ api-spec.md              # APIæ¥å£æ–‡æ¡£
â”œâ”€â”€ deployment-guide.md      # éƒ¨ç½²æŒ‡å—
â”œâ”€â”€ test-plan.md             # æµ‹è¯•è®¡åˆ’
â”œâ”€â”€ project-roadmap.md       # å®æ–½è·¯çº¿å›¾
â”œâ”€â”€ config/                   # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ database.js          # æ•°æ®åº“é…ç½®
â”‚   â””â”€â”€ index.js             # åº”ç”¨é…ç½®
â”œâ”€â”€ controllers/             # ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ auth.js              # è®¤è¯æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ rooms.js             # æˆ¿é—´æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ messages.js          # æ¶ˆæ¯æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ friends.js           # å¥½å‹æ§åˆ¶å™¨
â”‚   â””â”€â”€ notifications.js     # é€šçŸ¥æ§åˆ¶å™¨
â”œâ”€â”€ models/                  # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ user.js
â”‚   â”œâ”€â”€ room.js
â”‚   â””â”€â”€ message.js
â”œâ”€â”€ routes/                  # è·¯ç”±å®šä¹‰
â”‚   â”œâ”€â”€ auth.js
â”‚   â”œâ”€â”€ rooms.js
â”‚   â”œâ”€â”€ messages.js
â”‚   â”œâ”€â”€ friends.js
â”‚   â””â”€â”€ notifications.js
â”œâ”€â”€ middleware/              # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ auth.js              # è®¤è¯ä¸­é—´ä»¶
â”‚   â””â”€â”€ rateLimit.js         # é¢‘ç‡é™åˆ¶
â”œâ”€â”€ utils/                   # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ socketManager.js     # Socketç®¡ç†
â”‚   â”œâ”€â”€ validator.js         # è¾“å…¥éªŒè¯
â”‚   â””â”€â”€ logger.js            # æ—¥å¿—å·¥å…·
â”œâ”€â”€ scripts/                 # ç»´æŠ¤è„šæœ¬
â”‚   â”œâ”€â”€ monitor.js           # ç›‘æ§è„šæœ¬
â”‚   â””â”€â”€ backup.js            # å¤‡ä»½è„šæœ¬
â”œâ”€â”€ public/                  # é™æ€èµ„æº
â”‚   â”œâ”€â”€ index.html           # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ css/                 # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ js/                  # å‰ç«¯è„šæœ¬
â”‚   â””â”€â”€ images/              # å›¾ç‰‡èµ„æº
â””â”€â”€ logs/                    # æ—¥å¿—ç›®å½•
    â”œâ”€â”€ pm2-error.log
    â”œâ”€â”€ pm2-out.log
    â””â”€â”€ monitor.log
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚
- Serv00è´¦æˆ·
- Node.js 14+ ç¯å¢ƒ
- MySQLæ•°æ®åº“è®¿é—®æƒé™
- åŸŸåï¼ˆå¯é€‰ï¼‰

### éƒ¨ç½²æ­¥éª¤

1. **å‡†å¤‡ç¯å¢ƒ**
```bash
# SSHç™»å½•Serv00
ssh your_username@serv00.com

# åˆ›å»ºç›®å½•
mkdir -p ~/domains/chat.yourdomain.com/{app,public_html,logs,backups}
cd ~/domains/chat.yourdomain.com/app
```

2. **è·å–ä»£ç **
```bash
# å…‹éš†æˆ–ä¸Šä¼ é¡¹ç›®æ–‡ä»¶
git clone <your-repo> .
# æˆ–ä¸Šä¼ æ–‡ä»¶åˆ°appç›®å½•
```

3. **é…ç½®æ•°æ®åº“**
```bash
# é€šè¿‡phpMyAdminå¯¼å…¥database-schema.sql
# åˆ›å»º.envæ–‡ä»¶ï¼Œå‚è€ƒ.env.example
```

4. **å®‰è£…ä¾èµ–**
```bash
npm install
```

5. **å¯åŠ¨åº”ç”¨**
```bash
npm run pm2:start
```

6. **é…ç½®åå‘ä»£ç†**
```bash
# ç¼–è¾‘.htaccessæ–‡ä»¶ï¼Œé…ç½®Apacheä»£ç†
```

è¯¦ç»†æ­¥éª¤è¯·å‚è€ƒ [éƒ¨ç½²æŒ‡å—](deployment-guide.md)

## ğŸ“¡ APIæ¥å£

### è®¤è¯
- `POST /api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/auth/logout` - ç”¨æˆ·ç™»å‡º
- `GET /api/auth/profile` - è·å–èµ„æ–™
- `PUT /api/auth/profile` - æ›´æ–°èµ„æ–™

### æˆ¿é—´ç®¡ç†
- `GET /api/rooms` - æˆ¿é—´åˆ—è¡¨
- `POST /api/rooms` - åˆ›å»ºæˆ¿é—´
- `GET /api/rooms/:id` - æˆ¿é—´è¯¦æƒ…
- `POST /api/rooms/:id/join` - åŠ å…¥æˆ¿é—´
- `POST /api/rooms/:id/leave` - ç¦»å¼€æˆ¿é—´

### æ¶ˆæ¯
- `GET /api/messages/:room_id` - æ¶ˆæ¯å†å²
- `POST /api/messages/:room_id` - å‘é€æ¶ˆæ¯

### å¥½å‹
- `GET /api/friends` - å¥½å‹åˆ—è¡¨
- `POST /api/friends/request` - å‘é€è¯·æ±‚
- `PUT /api/friends/:id` - å¤„ç†è¯·æ±‚

### é€šçŸ¥
- `GET /api/notifications` - é€šçŸ¥åˆ—è¡¨
- `PUT /api/notifications/:id/read` - æ ‡è®°å·²è¯»

### Socketäº‹ä»¶
- `authenticate` - è®¤è¯
- `join_room` - åŠ å…¥æˆ¿é—´
- `leave_room` - ç¦»å¼€æˆ¿é—´
- `send_message` - å‘é€æ¶ˆæ¯
- `typing_start/stop` - è¾“å…¥çŠ¶æ€
- `message_received` - æ¥æ”¶æ¶ˆæ¯
- `user_joined/left` - ç”¨æˆ·è¿›å‡º
- `notification` - æ–°é€šçŸ¥

è¯¦ç»†æ–‡æ¡£è¯·å‚è€ƒ [APIè§„èŒƒ](api-spec.md)

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡ (.env)
```env
# æœåŠ¡å™¨
PORT=3000
NODE_ENV=production

# æ•°æ®åº“
DB_HOST=localhost
DB_USER=your_user
DB_PASSWORD=your_password
DB_NAME=chat_system

# JWT
JWT_SECRET=your_super_secret_key
JWT_EXPIRE=24h

# é™åˆ¶
MAX_CONNECTIONS=50
MAX_MESSAGES_PER_MINUTE=30
UPLOAD_LIMIT=5242880
```

### PM2é…ç½® (ecosystem.config.js)
```javascript
module.exports = {
  apps: [{
    name: 'chat-server',
    script: 'server.js',
    instances: 1,
    max_memory_restart: '400M',
    error_file: '../logs/pm2-error.log',
    out_file: '../logs/pm2-out.log'
  }]
};
```

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### ç›®æ ‡æŒ‡æ ‡
- **å¹¶å‘ç”¨æˆ·**: 30-50äºº
- **æ¶ˆæ¯å»¶è¿Ÿ**: < 200ms
- **å†…å­˜ä½¿ç”¨**: < 400MB
- **CPUä½¿ç”¨**: < 20%
- **æ•°æ®åº“è¿æ¥**: < 10ä¸ª
- **å¯ç”¨æ€§**: > 99%

### Serv00é™åˆ¶
- **CPU**: 10-20% å•æ ¸
- **å†…å­˜**: 512MB-1GB
- **è¿›ç¨‹**: 3-5ä¸ª
- **å­˜å‚¨**: 5-10GB
- **å¸¦å®½**: æœ‰é™åˆ¶

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- âœ… JWTä»¤ç‰Œè®¤è¯
- âœ… å¯†ç bcryptåŠ å¯†
- âœ… SQLæ³¨å…¥é˜²æŠ¤
- âœ… XSSæ”»å‡»é˜²æŠ¤
- âœ… CSRFä¿æŠ¤
- âœ… é€Ÿç‡é™åˆ¶
- âœ… è¾“å…¥éªŒè¯
- âœ… æƒé™æ§åˆ¶

## ğŸ“ˆ ç›‘æ§ä¸ç»´æŠ¤

### æ—¥å¸¸å‘½ä»¤
```bash
# æŸ¥çœ‹çŠ¶æ€
pm2 status
pm2 logs chat-server

# é‡å¯åº”ç”¨
pm2 restart chat-server

# æ‰‹åŠ¨å¤‡ä»½
node scripts/backup.js

# è¿è¡Œç›‘æ§
node scripts/monitor.js
```

### è‡ªåŠ¨ä»»åŠ¡
- **æ¯5åˆ†é’Ÿ**: ç³»ç»ŸçŠ¶æ€ç›‘æ§
- **æ¯å°æ—¶**: æ—¥å¿—è½®è½¬
- **æ¯å¤©**: æ•°æ®åº“å¤‡ä»½
- **æ¯å‘¨**: å®‰å…¨æ£€æŸ¥

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæµ‹è¯•
```bash
# å…¨éƒ¨æµ‹è¯•
npm test

# å•å…ƒæµ‹è¯•
npm run test:unit

# é›†æˆæµ‹è¯•
npm run test:integration

# æ€§èƒ½æµ‹è¯•
npm run test:performance
```

è¯¦ç»†æµ‹è¯•è®¡åˆ’è¯·å‚è€ƒ [æµ‹è¯•è®¡åˆ’](test-plan.md)

## ğŸ“š æ–‡æ¡£

- [éƒ¨ç½²æŒ‡å—](deployment-guide.md) - è¯¦ç»†éƒ¨ç½²æ­¥éª¤
- [APIè§„èŒƒ](api-spec.md) - æ¥å£å’Œäº‹ä»¶æ–‡æ¡£
- [æµ‹è¯•è®¡åˆ’](test-plan.md) - æµ‹è¯•ç­–ç•¥å’Œç”¨ä¾‹
- [é¡¹ç›®è·¯çº¿å›¾](project-roadmap.md) - å®æ–½è®¡åˆ’
- [æ•°æ®åº“æ¶æ„](database-schema.sql) - æ•°æ®åº“è®¾è®¡

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### é€‚åˆåœºæ™¯
- âœ… ä¸ªäººé¡¹ç›®å­¦ä¹ 
- âœ… å°å‹ç¤¾åŒºäº¤æµ
- âœ… å›¢é˜Ÿå†…éƒ¨æ²Ÿé€š
- âœ… æ•™è‚²æ¼”ç¤º
- âœ… åŸå‹éªŒè¯

### ä¸é€‚åˆåœºæ™¯
- âŒ å¤§è§„æ¨¡å•†ä¸šåº”ç”¨
- âŒ é«˜å¹¶å‘ç”Ÿäº§ç¯å¢ƒ
- âŒ ä¼ä¸šçº§é€šä¿¡
- âŒ éœ€è¦SLAä¿éšœçš„åœºæ™¯

## âš ï¸ é‡è¦æé†’

### Serv00ä½¿ç”¨é™åˆ¶
1. **ç”¨æˆ·è§„æ¨¡æ§åˆ¶**: å»ºè®®æ³¨å†Œç”¨æˆ·<200äººï¼ŒåŒæ—¶åœ¨çº¿<50äºº
2. **èµ„æºç›‘æ§**: å¯†åˆ‡å…³æ³¨å†…å­˜å’ŒCPUä½¿ç”¨
3. **å®šæœŸç»´æŠ¤**: æ¯å‘¨æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
4. **æ•°æ®å¤‡ä»½**: å®šæœŸå¤‡ä»½æ•°æ®åº“
5. **è¿›ç¨‹å®ˆæŠ¤**: ä½¿ç”¨PM2ç¡®ä¿åº”ç”¨æŒç»­è¿è¡Œ

### æ‰©å±•å»ºè®®
å½“ç”¨æˆ·é‡å¢é•¿æ—¶ï¼š
1. ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢å’Œç´¢å¼•
2. å®ç°æ¶ˆæ¯ç¼“å­˜
3. è€ƒè™‘è¿ç§»åˆ°VPSï¼ˆ$5/æœˆèµ·ï¼‰
4. ä½¿ç”¨ä¸“ä¸šæ¶ˆæ¯æœåŠ¡ï¼ˆå¯é€‰ï¼‰

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ LICENSE æ–‡ä»¶

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·ï¼š
1. æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£
2. æ£€æŸ¥æ—¥å¿—æ–‡ä»¶
3. å‚è€ƒéƒ¨ç½²æŒ‡å—æ•…éšœæ’æŸ¥éƒ¨åˆ†
4. æäº¤Issue

---

**é¡¹ç›®çŠ¶æ€**: ğŸš€ å¼€å‘ä¸­
**æœ€æ–°ç‰ˆæœ¬**: v1.0.0
**æœ€åæ›´æ–°**: 2026-01-04